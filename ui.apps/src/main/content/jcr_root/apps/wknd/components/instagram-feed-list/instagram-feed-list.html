<div data-sly-use.component="com.adobe.cq.wcm.core.components.models.Component"
     data-sly-use.igfeedlist="com.adobe.aem.guides.wknd.core.models.InstagramFeedList"
     data-sly-use.template="core/wcm/components/commons/v1/templates.html"
     id="${component.id}"
     class="cmp-instagram"
     data-sly-use.media="media.js">
    <span class="cmp-instagram-list__properties">
        ${media.title}
    </span>
    <div class="cmp-instagram__layout cmp-instagram__layout--is-mixed"
         data-sly-test.posts="${igfeedlist.posts}">
        <div class="cmp-instagram__feed"
             data-sly-repeat.item="${posts}">
            <a href="#ig-feed"
               data-ig-modal-url="${item.xfRelatedProductPath @ selectors='content', extension = 'html', context='uri'}"
               data-type-name="${item.shortcode_media.__typename}"
               data-is-video="${item.shortcode_media.is_video}"
               data-display-url="${item.shortcode_media.display_resources[0].src @ context='uri'}"
               data-media-to-caption="${item.shortcode_media.edgeMediaToCaption @ context='attribute'}"
               data-sidecar-to-children="${item.shortcode_media.edgeSidecarToChildren @ context='attribute'}"
               data-owner="${item.shortcode_media.edgeOwner @ context='attribute'}">
                <img class="cmp-instagram__image"
                     src="${item.shortcode_media.display_resources[0].src @ context='uri'}" >
            </a>
            <div  class="cmp-instagram__xf-product-related"
                  data-sly-test="${wcmmode.edit && item.xfRelatedProductPath}">
                <sly data-sly-resource="${item.xfRelatedProductPath @ selectors='content', wcmmode='disabled'}"></sly>
            </div>
        </div>
    </div>
</div>

<sly data-sly-call="${template.placeholder @ isEmpty=igfeedlist.hasPosts, classAppend='cmp-instagram-list'}"></sly>
